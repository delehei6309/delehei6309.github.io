webpackJsonp([10],{499:function(e,t,s){var o=s(224)(s(540),s(599),null,null);e.exports=o.exports},540:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(570),i=(s.n(o),s(225)),a=(s(119),s(81)),n=s(226),r=s.n(n);t.default={name:"safe",data:function(){return{mer_uuid:this.$store.state.mer_uuid,operator_uuid:this.$store.state.operator_uuid,operator_no:this.$store.state.operator_no,operator_name:this.$store.state.operator_name,user_name:this.$store.state.user_name,created_time:this.$store.state.created_time,mobile_no:this.$store.state.operator_mobile_no,email:this.$store.state.operator_email,phoneDialogVisible:!1,phoneNumber:"",realPhoneNumber:"",verifyPhone:"",verifyPhoneLoading:!1,btnTextPhone:"获取验证码",oldMobile:"",btnLoading:!1,phoneLoading:!1,password:"",newPassword:"",newPassword2:"",verifyPsw:"",pswDialogVisible:!1,pswLoading:!1,newPhoneShow:!this.mobile_no}},created:function(){this.getData()},computed:{titleTxt:function(){return this.newPhoneShow?"手机号绑定":"验证手机号"}},components:{},methods:{getData:function(){var e=this;this.operator_uuid||this.$store.dispatch("getAccountInfo").then(function(t){200==t.resp_code?(r.a.forEach(t.data,function(t,s){e[s]=t}),e.newPhoneShow=!e.mobile_no):e.$message({type:"error",message:t.resp_message,showClose:!0})})},linkCertify:function(){this.$router.push({path:"/menus/certify"})},bindPhone:function(){this.phoneDialogVisible=!0},goVerify:function(){var e=this,t=this.oldMobile;if(!s.i(a.k)(t))return this.$message({type:"error",message:"请输入正确格式的手机号！",showClose:!0}),!1;this.phoneLoading=!0,i.a.post("/bizeff/merchants/"+this.mer_uuid+"/operator/check",{mobile_no:t}).then(function(t){e.phoneLoading=!1,200==t.resp_code?(e.oldMobile="",e.newPhoneShow=!0):e.$message({type:"error",message:t.resp_message||"服务器错误！",showClose:!0})})},bindPhoneVerify:function(){var e=this,t=this.phoneNumber;return s.i(a.k)(t)?!this.verifyPhoneLoading&&(this.verifyPhoneLoading=!0,this.realPhoneNumber=t,void s.i(a.d)(function(t){t.statu?(e.btnTextPhone="获取验证码",e.verifyPhoneLoading=!1):e.btnTextPhone=t.time+"s"})):(this.$message({type:"error",message:"请输入正确格式的手机号！",showClose:!0}),!1)},phoneDialogSumit:function(){var e=this;if(!this.newPhoneShow)return this.$message({type:"error",message:"请先完成手机号验证！",showClose:!0}),!1;var t=this.realPhoneNumber;if(!t)return this.$message({type:"error",message:"请先获取验证码！",showClose:!0}),!1;if(!s.i(a.k)(t))return this.$message({type:"error",message:"请输入正确格式的手机号！",showClose:!0}),!1;var o=this.verifyPhone;if(!s.i(a.i)(o))return this.$message({type:"error",message:"请输入验证码！",showClose:!0}),!1;this.phoneLoading=!0,i.a.post("/bizeff/merchants/"+this.mer_uuid+"/operator/",{mobile_no:t,verify:"123456"}).then(function(t){e.phoneLoading=!1,200==t.resp_code?(e.$message({message:"安全手机绑定成功！",type:"success",showClose:!0}),e.phoneDialogVisible=!1,e.clearPhoneDialog(),r.a.forEach(t.data,function(t,s){e[s]=t})):e.$message({message:t.resp_message,type:"error",showClose:!0})})},clearPhoneDialog:function(){this.phoneNumber="",this.verifyPhone=""},editPsw:function(){this.pswDialogVisible=!0},pswDialogSumit:function(){var e=this,t=(this.password,this.newPassword);if(t!=this.newPassword2)return this.$message({message:"新密码两次输入不一致！",type:"error",showClose:!0}),!1;this.pswLoading=!0,i.a.post("/bizeff/merchants/"+this.mer_uuid+"/operators",{operator_uuid:this.operator_uuid,user_name:this.user_name,password:t}).then(function(t){200==t.resp_code?(e.pswDialogVisible=!1,e.clearPswDialog(),e.$message({type:"success",message:"修改密码成功！",showClose:!0})):e.$message({type:"error",message:t.resp_message,showClose:!0})})},clearPswDialog:function(){this.password="",this.newPassword="",this.newPassword2="",this.verifyPsw=""},onlySandN:function(e){return s.i(a.l)(e)},onlyNumber:function(e){return s.i(a.f)(e)},closeDialog:function(){this.mobile_no||(this.phoneDialogVisible=!1)}},destroyed:function(){}}},553:function(e,t,s){t=e.exports=s(484)(!1),t.push([e.i,".safe{padding-left:30px}.safe h5{font-size:18px;margin-bottom:6px}.safe .safe-infor{margin-bottom:20px}.safe .safe-list dl:not(:last-child){margin-bottom:8px}.safe .safe-list dl dt{min-width:100px;text-align:right}.safe .safe-setting .safe-list dl dd{min-width:132px}.dialog-phone .phone-form dl:not(:last-child),.dialog-psw .phone-form dl:not(:last-child){margin-bottom:20px}.dialog-phone .phone-form .verify-input,.dialog-psw .phone-form .verify-input{width:127px}.dialog-phone .phone-form .verify-btn,.dialog-psw .phone-form .verify-btn{width:92px}.dialog-phone .flex-wrap,.dialog-psw .flex-wrap{width:620px;transition:all .3s}.dialog-phone .flex-wrap>div,.dialog-psw .flex-wrap>div{width:50%}.dialog-phone .flex-wrap.new-phone,.dialog-psw .flex-wrap.new-phone{-webkit-transform:translateX(-50%);transform:translateX(-50%)}.dialog-phone{overflow:hidden}.dialog-phone .span-el-input{margin-right:10px}.dialog-psw dl dt{width:100px;text-align:right}",""])},570:function(e,t,s){var o=s(553);"string"==typeof o&&(o=[[e.i,o,""]]);var i={};i.transform=void 0;s(485)(o,i);o.locals&&(e.exports=o.locals)},599:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"safe"},[s("div",{staticClass:"safe-infor"},[s("h5",[e._v("账户信息")]),e._v(" "),s("div",{staticClass:"safe-list"},[s("dl",{attrs:{flex:"cross:center"}},[s("dt",[e._v("登录账号：")]),e._v(" "),s("dd",[s("span",[e._v(e._s(e.user_name))]),e._v(" "),s("span",[e._v("(未认证，"),s("el-button",{attrs:{type:"text"},on:{click:e.linkCertify}},[e._v("点击进行实名认证")]),e._v(")")],1)])]),e._v(" "),s("dl",{attrs:{flex:"cross:center"}},[s("dt",[e._v("账号ID：")]),e._v(" "),s("dd",[e._v(e._s(e.operator_no))])]),e._v(" "),s("dl",{attrs:{flex:"cross:center"}},[s("dt",[e._v("开通时间：")]),e._v(" "),s("dd",[e._v(e._s(e.created_time))])])])]),e._v(" "),s("div",{staticClass:"safe-setting"},[s("h5",[e._v("安全设置")]),e._v(" "),s("div",{staticClass:"safe-list"},[s("dl",{attrs:{flex:"cross:center"}},[s("dt",[e._v("安全手机：")]),e._v(" "),s("dd",[e.mobile_no?[e._v(e._s(e.mobile_no))]:[e._v("未绑定")]],2),e._v(" "),s("dd",[s("el-button",{attrs:{type:"text"},on:{click:e.bindPhone}},[e.mobile_no?[e._v("修改")]:[e._v("绑定")]],2)],1)]),e._v(" "),s("dl",{attrs:{flex:"cross:center"}},[s("dt",[e._v("登录密码：")]),e._v(" "),s("dd",[e._v("※※※※※※※※")]),e._v(" "),s("dd",[s("el-button",{attrs:{type:"text"},on:{click:e.editPsw}},[e._v("修改")])],1)])])]),e._v(" "),s("el-dialog",{attrs:{title:e.titleTxt,visible:e.phoneDialogVisible,width:"360px",center:""},on:{"update:visible":function(t){e.phoneDialogVisible=t}}},[s("div",{staticClass:"dialog-phone"},[s("div",{staticClass:"flex-wrap",class:{"new-phone":e.newPhoneShow},attrs:{flex:""}},[s("div",{attrs:{flex:"main:center cross:center"}},[s("span",{staticClass:"span-el-input"},[s("el-input",{attrs:{type:"text",placeholder:"请输入手机号",maxlength:"11"},nativeOn:{keyup:function(t){e.oldMobile=e.onlyNumber(e.oldMobile)}},model:{value:e.oldMobile,callback:function(t){e.oldMobile=t},expression:"oldMobile"}})],1),e._v(" "),s("span",[s("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-right",loading:e.phoneLoading},on:{click:e.goVerify}},[e._v("验证")])],1)]),e._v(" "),s("div",{staticClass:"phone-form"},[s("dl",{staticClass:"dom-must",attrs:{flex:"main:justify cross:center"}},[s("dt",{attrs:{"flex-box":"0"}},[e._v("手机号：")]),e._v(" "),s("dd",{attrs:{"flex-box":"1"}},[s("el-input",{attrs:{type:"text",placeholder:"请输入手机号",maxlength:"11"},nativeOn:{keyup:function(t){e.phoneNumber=e.onlyNumber(e.phoneNumber)}},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber=t},expression:"phoneNumber"}})],1)]),e._v(" "),s("dl",{staticClass:"dom-must",attrs:{flex:"main:justify cross:center"}},[s("dt",{attrs:{"flex-box":"0"}},[e._v("验证码：")]),e._v(" "),s("dd",{attrs:{"flex-box":"1",flex:"main:justify"}},[s("span",{staticClass:"verify-input"},[s("el-input",{attrs:{type:"text",placeholder:"请输入验证码",maxlength:"6"},nativeOn:{keyup:function(t){e.verifyPhone=e.onlySandN(e.verifyPhone)}},model:{value:e.verifyPhone,callback:function(t){e.verifyPhone=t},expression:"verifyPhone"}})],1),e._v(" "),s("span",[s("el-button",{staticStyle:{width:"92px"},attrs:{type:"primary",disabled:e.verifyPhoneLoading},on:{click:e.bindPhoneVerify}},[e._v(e._s(e.btnTextPhone))])],1)])])])])]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer",flex:"box:mean"},slot:"footer"},[s("div",[s("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1),e._v(" "),s("div",[s("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.phoneDialogSumit}},[e._v("确 定")])],1)])]),e._v(" "),s("el-dialog",{staticClass:"dialog-psw",attrs:{title:"修改密码",visible:e.pswDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){e.pswDialogVisible=t}}},[s("div",{staticClass:"phone-form"},[s("dl",{staticClass:"dom-must",attrs:{flex:"main:justify cross:center"}},[s("dt",{attrs:{"flex-box":"0"}},[e._v("旧密码：")]),e._v(" "),s("dd",{attrs:{"flex-box":"1"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入旧密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),e._v(" "),s("dl",{staticClass:"dom-must",attrs:{flex:"main:justify cross:center"}},[s("dt",{attrs:{"flex-box":"0"}},[e._v("新密码：")]),e._v(" "),s("dd",{attrs:{"flex-box":"1"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1)]),e._v(" "),s("dl",{staticClass:"dom-must",attrs:{flex:"main:justify cross:center"}},[s("dt",{attrs:{"flex-box":"0"}},[e._v("确认新密码：")]),e._v(" "),s("dd",{attrs:{"flex-box":"1"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.newPassword2,callback:function(t){e.newPassword2=t},expression:"newPassword2"}})],1)])]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer",flex:"box:mean"},slot:"footer"},[s("div",[s("el-button",{on:{click:function(t){e.pswDialogVisible=!1}}},[e._v("取 消")])],1),e._v(" "),s("div",[s("el-button",{attrs:{type:"primary",loading:e.pswLoading},on:{click:e.pswDialogSumit}},[e._v("确 定")])],1)])])],1)},staticRenderFns:[]}}});